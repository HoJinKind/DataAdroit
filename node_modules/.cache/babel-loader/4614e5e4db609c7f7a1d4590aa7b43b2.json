{"ast":null,"code":"var _jsxFileName = \"/Users/jin/Documents/dataadroit/src/UploadCSV.js\";\nimport React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport ReactFileReader from \"react-file-reader\";\nimport { BrowserRouter, Redirect, withRouter } from \"react-router-dom\";\nimport { CSVReader } from \"react-papaparse\";\n\nclass UploadCSV extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleReadCSV = data => {\n      // const b = data.map(Number);\n      console.log(data);\n      const intdata = data;\n      var res = data.data[1].map(function (v) {\n        return parseInt(v, 10);\n      });\n      console.log(res);\n      this.props.history.push({\n        pathname: \"/charts\",\n        state: {\n          detail: res,\n          title: data.data[0][0]\n        }\n      });\n    };\n\n    this.handleOnError = (err, file, inputElem, reason) => {\n      console.log(err);\n    };\n\n    this.handleImportOffer = () => {\n      this.fileInput.current.click();\n    };\n\n    this.handleFiles = files => {\n      var reader = new FileReader();\n\n      reader.onload = function (e) {\n        // Use reader.result\n        alert(reader.result);\n      };\n\n      const router = this.context.router;\n      this.props.history.push({\n        pathname: \"/charts\",\n        state: {\n          detail: \"123\"\n        }\n      });\n      const a = reader.readAsText(files[0]);\n    };\n\n    this.fileInput = React.createRef();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(CSVReader, {\n      onFileLoaded: this.handleReadCSV,\n      inputRef: this.fileInput,\n      style: {\n        display: \"none\"\n      },\n      onError: this.handleOnError,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.handleImportOffer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, \"Import\"));\n  }\n\n}\n\nexport default withRouter(UploadCSV);","map":{"version":3,"sources":["/Users/jin/Documents/dataadroit/src/UploadCSV.js"],"names":["React","Component","d3","ReactFileReader","BrowserRouter","Redirect","withRouter","CSVReader","UploadCSV","constructor","props","handleReadCSV","data","console","log","intdata","res","map","v","parseInt","history","push","pathname","state","detail","title","handleOnError","err","file","inputElem","reason","handleImportOffer","fileInput","current","click","handleFiles","files","reader","FileReader","onload","e","alert","result","router","context","a","readAsText","createRef","render","display"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,KAAKC,EAAZ,MAAoB,IAApB;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,SAASC,aAAT,EAAwBC,QAAxB,EAAkCC,UAAlC,QAAoD,kBAApD;AACA,SAASC,SAAT,QAA0B,iBAA1B;;AAEA,MAAMC,SAAN,SAAwBR,KAAK,CAACC,SAA9B,CAAwC;AACtCQ,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAKnBC,aALmB,GAKHC,IAAI,IAAI;AACtB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,YAAMG,OAAO,GAAGH,IAAhB;AACA,UAAII,GAAG,GAAGJ,IAAI,CAACA,IAAL,CAAU,CAAV,EAAaK,GAAb,CAAiB,UAASC,CAAT,EAAY;AACrC,eAAOC,QAAQ,CAACD,CAAD,EAAI,EAAJ,CAAf;AACD,OAFS,CAAV;AAIAL,MAAAA,OAAO,CAACC,GAAR,CAAYE,GAAZ;AACA,WAAKN,KAAL,CAAWU,OAAX,CAAmBC,IAAnB,CAAwB;AACtBC,QAAAA,QAAQ,EAAE,SADY;AAEtBC,QAAAA,KAAK,EAAE;AAAEC,UAAAA,MAAM,EAAER,GAAV;AAAeS,UAAAA,KAAK,EAAEb,IAAI,CAACA,IAAL,CAAU,CAAV,EAAa,CAAb;AAAtB;AAFe,OAAxB;AAID,KAlBkB;;AAAA,SAoBnBc,aApBmB,GAoBH,CAACC,GAAD,EAAMC,IAAN,EAAYC,SAAZ,EAAuBC,MAAvB,KAAkC;AAChDjB,MAAAA,OAAO,CAACC,GAAR,CAAYa,GAAZ;AACD,KAtBkB;;AAAA,SAwBnBI,iBAxBmB,GAwBC,MAAM;AACxB,WAAKC,SAAL,CAAeC,OAAf,CAAuBC,KAAvB;AACD,KA1BkB;;AAAA,SA4BnBC,WA5BmB,GA4BLC,KAAK,IAAI;AACrB,UAAIC,MAAM,GAAG,IAAIC,UAAJ,EAAb;;AACAD,MAAAA,MAAM,CAACE,MAAP,GAAgB,UAASC,CAAT,EAAY;AAC1B;AACAC,QAAAA,KAAK,CAACJ,MAAM,CAACK,MAAR,CAAL;AACD,OAHD;;AAFqB,YAMbC,MANa,GAMF,KAAKC,OANH,CAMbD,MANa;AAOrB,WAAKjC,KAAL,CAAWU,OAAX,CAAmBC,IAAnB,CAAwB;AAAEC,QAAAA,QAAQ,EAAE,SAAZ;AAAuBC,QAAAA,KAAK,EAAE;AAAEC,UAAAA,MAAM,EAAE;AAAV;AAA9B,OAAxB;AACA,YAAMqB,CAAC,GAAGR,MAAM,CAACS,UAAP,CAAkBV,KAAK,CAAC,CAAD,CAAvB,CAAV;AACD,KArCkB;;AAEjB,SAAKJ,SAAL,GAAiBhC,KAAK,CAAC+C,SAAN,EAAjB;AACD;;AAmCDC,EAAAA,MAAM,GAAG;AACP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,SAAD;AACE,MAAA,YAAY,EAAE,KAAKrC,aADrB;AAEE,MAAA,QAAQ,EAAE,KAAKqB,SAFjB;AAGE,MAAA,KAAK,EAAE;AAAEiB,QAAAA,OAAO,EAAE;AAAX,OAHT;AAIE,MAAA,OAAO,EAAE,KAAKvB,aAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAOE;AAAQ,MAAA,OAAO,EAAE,KAAKK,iBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPF,CADF;AAWD;;AAnDqC;;AAsDxC,eAAezB,UAAU,CAACE,SAAD,CAAzB","sourcesContent":["import React, { Component } from \"react\";\nimport * as d3 from \"d3\";\nimport ReactFileReader from \"react-file-reader\";\nimport { BrowserRouter, Redirect, withRouter } from \"react-router-dom\";\nimport { CSVReader } from \"react-papaparse\";\n\nclass UploadCSV extends React.Component {\n  constructor(props) {\n    super(props);\n    this.fileInput = React.createRef();\n  }\n\n  handleReadCSV = data => {\n    // const b = data.map(Number);\n    console.log(data);\n    const intdata = data;\n    var res = data.data[1].map(function(v) {\n      return parseInt(v, 10);\n    });\n\n    console.log(res);\n    this.props.history.push({\n      pathname: \"/charts\",\n      state: { detail: res, title: data.data[0][0] }\n    });\n  };\n\n  handleOnError = (err, file, inputElem, reason) => {\n    console.log(err);\n  };\n\n  handleImportOffer = () => {\n    this.fileInput.current.click();\n  };\n\n  handleFiles = files => {\n    var reader = new FileReader();\n    reader.onload = function(e) {\n      // Use reader.result\n      alert(reader.result);\n    };\n    const { router } = this.context;\n    this.props.history.push({ pathname: \"/charts\", state: { detail: \"123\" } });\n    const a = reader.readAsText(files[0]);\n  };\n  render() {\n    return (\n      <div>\n        <CSVReader\n          onFileLoaded={this.handleReadCSV}\n          inputRef={this.fileInput}\n          style={{ display: \"none\" }}\n          onError={this.handleOnError}\n        />\n        <button onClick={this.handleImportOffer}>Import</button>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(UploadCSV);\n"]},"metadata":{},"sourceType":"module"}